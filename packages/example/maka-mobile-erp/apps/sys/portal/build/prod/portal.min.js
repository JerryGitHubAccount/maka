!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("maka")):"function"==typeof define&&define.amd?define(["maka"],t):"object"==typeof exports?exports["MakaApp-portal"]=t(require("maka")):e["MakaApp-portal"]=t(e.maka)}("undefined"!=typeof window&&window||"undefined"!=typeof global&&global,function(n){return function(n){var a={};function o(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=window['__pub_portal__'],o(o.s=5)}([function(e,t){e.exports=n},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e){e.exports={isMakaApp:!0,name:"portal",description:"portal",version:"1.0.0",license:"MIT",author:"",repository:{type:"git",url:"https://github.com/makajs/portal.git"},bugs:{url:"https://github.com/makajs/portal/issues"},homepage:"https://github.com/makajs/portal#readme",scripts:{start:"maka start",dev:"maka start --dev",build:"maka build",pkg:"maka pkg"},dependencies:{},server:{proxy:null,port:8e3},subAppDir:["./apps","../../base","../../home"],devDependencies:{}}},function(e,t,n){var o=n(1);e.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(e){o(t,e,n[e])})}return t}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){e.exports=n(7)},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,o=n(2),r={component:"div",className:"portal",children:[{component:"div",className:"{{(data.content && data.content.appName) ? 'portal-hidden': 'portal-show portal-header'}}",children:"ERP DEMO"},{component:"div",className:"{{(data.content && data.content.appName) ? 'portal-hidden': 'portal-content portal-show'}}",children:{component:"antd.TabBar",unselectedTintColor:"#949494",tintColor:"#33A3F4",barTintColor:"#F8FCFF",prerenderingSiblingsNumber:0,children:[{title:"首页",key:"home",component:"antd.TabBar.Item",selected:"{{data.selectedTab == 'home'}}",onPress:"{{()=>$base.ss({'data.selectedTab': 'home'})}}",icon:{component:"FA",name:"home"},selectedIcon:{component:"FA",name:"home"},children:[{component:"AppLoader",appName:"home"}]},{title:"报表",key:"rpt",component:"TabBar.Item",selected:"{{data.selectedTab == 'rpt'}}",onPress:"{{()=>$base.ss({'data.selectedTab': 'rpt'})}}",icon:{component:"FA",name:"bar-chart"},selectedIcon:{component:"FA",name:"bar-chart"},children:[{component:"AppLoader",appName:"rpt"}]},{title:"我的",key:"my",component:"TabBar.Item",selected:"{{data.selectedTab == 'my'}}",onPress:"{{()=>$base.ss({'data.selectedTab': 'my'})}}",icon:{component:"FA",name:"user"},selectedIcon:{component:"FA",name:"user"},children:[{component:"AppLoader",appName:"my"}]}]}},{component:"div",className:"{{(data.content && data.content.appName) ? 'portal-open-page portal-open-page-show': 'portal-open-page portal-open-page-show-hidden'}}",children:[{_for:"item in data.openPages",component:"AppLoader",appName:"{{item.appName}}","...":"{{item.appProps}}"}]}]},c=n(3),l=n.n(c),s=n(4),p=n.n(s),i=n(1),d=n.n(i),u=n(0),m=Object(u.actionMixin)("base","toast")(a=function e(t){var i=this;p()(this,e),d()(this,"onInit",function(){u.navigate.listen(i.listen),i.base.context.set("openPage",i.setContent)}),d()(this,"setContent",function(c,s){var p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(t,e){p=l()({},p,{onOk:function(e){t(e)}});var n=i.base.gs("data");if(!n.content||s!=n.content.appName){var a={title:c,appName:s,appProps:p},o=n.openPages||[],r={"data.content":a};-1!=n.openPages.findIndex(function(e){return e.title==c||e.appName==s})?i.base.ss(r):(n.openPages.push(a),r["data.openPages"]=o,i.base.ss(r),setTimeout(function(){var e=u.navigate.getLocation(),t="".concat(e.pathname).concat(e.search).split("/");(t=t.slice(0,t.indexOf("portal")+1)).push(a.appName),u.navigate.redirect(t.join("/"))},0))}})}),d()(this,"closeContent",function(t){var e=i.base.gs("data.openPages")||[],n=e.findIndex(function(e){return e.appName==t});e=e.splice(n,0),i.base.ss({"data.openPages":e,"data.content":e[e.length-1]})}),d()(this,"listen",function(e,t){var n="".concat(e.pathname).concat(e.search);if(n&&-1!=n.indexOf("portal")){var a=i.base.gs("data.content.appName");if("POP"!=t){var o=n.split("/"),r=o[o.length-1];"portal"!=r&&r?i.setContent("",r):i.base.ss({"data.openTabs":[],"data.content":{}})}else i.closeContent(a)}}),Object.assign(this,t.mixins)})||a,f={data:{selectedTab:"home",content:{},openPages:[],other:{}}},b=u.fetch.mockData;u.fetch.mock("/v1/user/login",function(t){b.users||(b.users=[{id:1,mobile:13334445556,password:"c4ca4238a0b923820dcc509a6f75849b",name:"zlj"}]);var e=b.users.find(function(e){return e.mobile==t.mobile&&e.password==t.password});return e?{result:!0,token:"".concat(e.id,",").concat(e.mobile,",").concat(e.password,",").concat(e.name?e.name:""),value:t}:{result:!1,error:{message:"用户名或者密码不正确（默认 手机:13334445556,密码:1）"}}});n(6);n.d(t,"name",function(){return h}),n.d(t,"view",function(){return r}),n.d(t,"state",function(){return f}),n.d(t,"action",function(){return m});var h=o.name}])});